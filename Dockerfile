FROM node:20

WORKDIR /web

COPY . .

RUN npm install

RUN chmod 755 scripts/entrypoint.sh

RUN chmod 755 scripts/wait-for-it.sh

RUN apt-get update && apt-get install -y dos2unix

RUN apt-get install -y dnsutils

RUN dos2unix scripts/entrypoint.sh

RUN mkdir -p /var/www/html/upload

COPY public/imgs/user/image.jpg /var/www/html/upload/

RUN echo "PTITCTF{This_is_a_flag}" >> /etc/passwd

EXPOSE 3000